---
layout: post
comments: true
categories: imx6ull
---
## linux系统使用工具

1.将文件系统容量显示格式以易读的方式展示。df -h <br>

2.统计每个文件和目录所占用的容量大小，并以易读的方式展示出来  du -ah <br>

3. 列出已经安装了哪些模块 <br>
[root@imx6ull:~]# lsmod <br>
 
4. 卸载掉某个已安装的模块 <br>
[root@imx6ull:~]# rmmod <模块名称>  <br>


5.执行 ls -al 命令显示当前目录下的所有文件及文件夹包括隐藏的.和..等的详细信息。
文件属性示意图如下
 
6.改变文件的权限和属性
chgrp：改变文件所属用户组
chown：改变文件所有者
chmod：改变文件的权限

范例：
chmod 777 .bashrc 
将文件.bashrc这个文件的所有权限设置都启用。


7. pwd
 
8.mkdir
 
9.rmdir
 
10.复制目录时，常用如下命令：
$ cp  -rfd  dir_a  dir_b
r：recursive，递归地，即复制所有文件
f：force，强制覆盖
d：如果源文件为链接文件，也只是把它作为链接文件复制过去，而不是复制实际文件


11.删除目录时，常用如下命令：
$ rm  -rf  dir_a
r：recursive，递归地，即复制所有文件
f：force，强制删除

12.cat   复制文件或目录
 
13.touch  更新一下


14.$ find  /home/book/dira/  -name  " test1.txt " 
说明:
a) /home/book/dira/指明了查找的路径。
b)“-name”表明以名字来查找文件 。
c)“test1.txt”，就指明查找名为“test1.txt”的文件。

举例2：
$ find  /home/book/dira/ -name  " *.txt " 
说明: 查找指定目录下面所有以.txt结尾的文件，其中“*”是通配符。

举例3：
find  /home/book/dira/  -name "dira"	
说明: 查找指定目录下面是否存在“dira”这个目录或文件，“dira”是名称。

注意：
1）	如果没有指定查找目录，则为当前目录。
$ find . -name " *.txt "    //其中.代表当前路径。 
$ find -name " *.txt "      //没加路径，默认是当前路径下查找。
2）	find还有一些高级的用法，如查找最近几天(几个小时)之内(之前)有变动的文件 
$ find  /home/book  -mtime -2       //查找/home目录下两天内有变动的文件。


15.grep
grep命令的作用是查找文件中符合条件的字符串，其格式如下：
grep [选项] [查找模式] [文件名]。
假设dira目录的test1.txt和dirb目录的test1.txt都含有如下内容： aaa AAAAAA abc abcabcabc cbacbacba match_pattern nand->erase。

通过查找字符串，希望显示如下内容： 
1）所在的文件名----grep查找时默认已经显示目标文件名 
2）所在的行号------使用-n选项。

grep -rn "字符串" 文件名 r(recursive)：递归查找 n(number)：显示目标位置的行号 字符串:要查找的字符串 文件名:要查找的目标文件，如果是*则表示查找当前目录下的所有文件和目录。
举例： 
//在test1.txt中查找字符串abc grep -rn "abc" * 在当前目录递归查找字符串abc
$ grep -n "abc" test1.txt  

注意：可以加入-w全字匹配。

可以在grep的结果中再次执行grep搜索，比如搜索包含有ABC的头文件，可执行如下命令：
$ grep  “ABC”  *  -nR  |  grep “\.h”
上述命令把第1个命令“grep  “ABC”  *  -nR”通过管道传给第2个命令。
即第2个命令在第1个命令的结果中搜索。

16.压缩/解压命令

举例：
1）	查看压缩文件
$ gzip -l  pwd.1.gz

2）	解压文件 
$ gzip -kd pwd.1.gz   //该压缩文件是以.gz结尾的单个文件

3）	压缩文件 
$ gzip -k mypwd.1    /得到了一个.gz结尾的压缩文件

注意： 
1）如果gzip不加任何选项，此时为压缩
压缩完该文件会生成后缀为.gz的压缩文件，并删除原来的文件。
所以，推荐使用gzip -k来压缩源文件，这样会保留原来的文件。
2）相同的文件内容，如果文件名不同，压缩后的大小也不同。
3）gzip只能压缩单个文件，不能压缩目录。



② bzip2
bzip2的常用选项：
-k(keep)	在压缩或解压时，保留输入文件； 
-d(decompress)	将压缩文件进行解压缩；

1）	压缩文件 
$ bzip2 -k mypwd.1 得到一个.bz2后缀的压缩文。

2）	解压文件 
$ bzip2 -kd mypwd.1.bz2

注意：
1）如果bzip2不加任何选项，此时为压缩
压缩完该文件会生成后缀为.bz2的压缩文件， 并删除原来的文件。
所以说，推荐使用bzip2 -k 来压缩文件，这样可以保留原来的文件。

2）bzip2只能压缩单个文件，不能压缩目录。

单个文件的压缩使用gzip或bzip2， 压缩有两个参数：
1）压缩时间  
2）压缩比。
一般情况下，小文件使用gzip来压缩，大文件使用bzip2来压缩。bzip2的的压缩率更高。


17.tar
tar常用选项：
-c(create)：表示创建用来生成文件包 。
-x：表示提取，从文件包中提取文件。
-t：可以查看压缩的文件。
-z：使用gzip方式进行处理，它与”c“结合就表示压缩，与”x“结合就表示解压缩。
-j：使用bzip2方式进行处理，它与”c“结合就表示压缩，与”x“结合就表示解压缩。 
-v(verbose)：详细报告tar处理的信息。
-f(file)：表示文件，后面接着一个文件名。 -C <指定目录> 解压到指定目录。

例1：tar打包、gzip压缩 
1）把目录dira压缩、打包为dira.tar.gz文件：
$ tar czvf dira.tar.gz dira。
注意：“tar –czvf”与“tar czvf”是一样的效果，所以说，后面统一取消“-”。

2）查看压缩文件：
$ tar tvf  dira.tar.gz

3）	解压文件，可以用-C 指定解压到哪个目录：
$ tar xzvf dira.tar.gz                 //解压到当前目录 
$ tar xzvf dira.tar.gz -C /home/book   //解压到/home/book。

例2：tar打包、bzip2压缩 
1）把目录dira压缩、打包为dira.tar.bz2文件
$ tar cjvf dira.tar.bz2 dira

2）查看压缩文件
$ tar tvf dira.tar.bz2

3）解压文件，可以用-C 指定解压到哪个目录
$ tar xjvf dira.tar.bz2                   //解压到当前目录:  
$ tar xjvf dira.tar.bz2 -C /home/book     //解压到/home/book








18.	网络命令
① ifconfig
查看网络、设置IP。ifconfig常用选项：
-a ：显示所有网卡接口
up：激活网卡接口 
down：关闭网卡接口
address：xxx.xxx.xxx.xxx，IP地址

示例： 
1）ifconfig：查看当前正在使用的网卡
$ ifconfig
ens160: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.137  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::4f45:59fb:ddb7:c274  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:ab:1d:05  txqueuelen 1000  (Ethernet)
        RX packets 998794  bytes 176687882 (176.6 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 801210  bytes 138020387 (138.0 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

2）ifconfig -a：查看所有网卡
$ ifconfig -a
ens160: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500
        inet 192.168.1.137  netmask 255.255.255.0  broadcast 192.168.1.255
        inet6 fe80::4f45:59fb:ddb7:c274  prefixlen 64  scopeid 0x20<link>
        ether 00:0c:29:ab:1d:05  txqueuelen 1000  (Ethernet)
        RX packets 998889  bytes 176699569 (176.6 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 801287  bytes 138033739 (138.0 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0

lo: flags=8<LOOPBACK>  mtu 65536
        inet 127.0.0.1  netmask 255.0.0.0
        loop  txqueuelen 1000  (Local Loopback)
        RX packets 51460  bytes 3249553 (3.2 MB)
        RX errors 0  dropped 0  overruns 0  frame 0
        TX packets 51460  bytes 3249553 (3.2 MB)
        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0


3) 设置网IP：
$ sudo ifconfig ens160 192.168.1.137

② route和DNS
确保Windows和Ubuntu的网络能互相ping通之后，如果Ubuntu无法上网，原因通常有2个：路由没设置好，DNS没设置好。

如果执行以下命令不成功，表示路由没设置好：
$ ping  8.8.8.8
connect: Network is unreachable

如果“ping 8.8.8.8”成功，但是“ping  www.baidu.com”不成功，则是DNS没设置好：
$ ping www.baidu.com
ping: unknown host www.baidu.com

DNS的设置比较简单，8.8.8.8是好记好用的DNS服务器，修改Ubuntu中的/etc/resolv.conf文件，内容如下：
nameserver  8.8.8.8















19	其他命令
① file
查看文件类型。其格式如下： 
file 文件名

使用gcc编译得到的程序是运行于PC的，但是很多初学者经常把这些程序放到ARM板子上去运行，这时一般都会提示：
xxx  not found
它并非“找不到”，而是格式不正确。
这时你可以执行“file xxx”查看它的类型，确定它是给PC还是给ARM编译的。

② which和whereis
which命令和whereis命令作用是查找命令或应用程序的所在位置，其格式如下：
which   命令名/应用程序名
whereis  命令名/应用程序名。

示例：
$ which pwd     //定位到/bin/pwd
$ which gcc     //定位到/usr/bin/gcc 
$ whereis pwd   //可得到可执行程序的位置和手册页的位置



3.3.3	vi编辑器
vi是一个命令，也是一个命令行下的编辑器，它有如下功能：
a. 打开文件、新建文件、保存文件
b. 光标移动
c. 文本编辑
d. (多行间|多列间)复制、粘贴、删除
e. 查找和替换

很多人不习惯在命令行下编辑文件，实际开发中也不会经常在命令行下编辑文件。但是在Linux系统中对文件做些简单修改时，使用vi命令的效率非常高。并且在很多时候，比如现场调试时，并没有GUI形式的编辑工具，vi是唯一选择。

① 模式
vi编辑器有三种模式,各个模式侧重点不一样：
a. 一般模式（光标移动、复制、粘贴、删除）
b. 编辑模式（编辑文本）
c. 命令行模式（查找和替换）
vi编辑器的三种模式间切换如下图所示
 

注意：
a. 当不知道处于何种模式时，按ESC键返回到一般模式。
b. wq(write quit)
c. i(insert)
② 文件的打开、新建、保存
打开文件、新建文件，命令如下(如果文件存在则打开文件，否则新建文件并打开)：
$ vi  文件名

修改结束之后，输入“:” 进入命令行模式，再输入“wq”保存退出：
:wq		保存并退出文件

注意：如果文件不存在，也需要输入“:wq”才可以保存新文件，否则不会新建文件。
    
在编辑完成时，返回一般模式，方法如下：
a. 输入“:w”则保存文件，如果已经保存文件，输入“:q”则退出文件
b. 直接输入“:wq”保存并退出
c. 如果不想保存被修改的内容，则输入“:q!”强制退出。

③ 编辑文件
打开文件后，默认处于“一般模式”，这时可以输入以下字母：
a. “i”：insert, 表示在光标前开始插入文本
b. “a”：after，表示在光标后开始插入文本
c. “o”：other，表示在当前行之下新建一行，可以在行首输入字符
④ 快速移动光标
在一般模式下，hjkl这四个按键就可以移动光标。
“h”是左移，“j”是下移，“k”是上移，“l”是右移。

在一般模式下，还可以使用下述命令快速跳转。
1）快速的定位到某一行：文件头、文件尾、指定某一行
ngg　　//光标移至第n行的行首（n为数字,想要跳转的行），
1gg　　//就跳到第一行的行首，就是文件头
2gg　　//就跳到第二行的行首 
G　　　//转至文件结尾

2）在某一行如何快速定位到某一列：
0　　  //（数字零）光标移至当前行行首
$　　  //光标移至当前行行末
fx　   //搜索当前行中下一个出现字母x的地方

注意：当你不知道vi当前处于何种模式时，使用esc键返回到一般模式。
⑤ 文本复制、粘贴、删除、撤销 
在一般模式下，可以执行以下命令。
1) 复制
yy　　	//复制当前行(y:yank(复制))   
nyy　　 //复制当前行及其后的n-1行(n是数字)

2) 粘贴
p　　　 //粘贴(p:paste)

3) 删除
dd　　 //删除光标所在行(d:delete)
ndd　　//删除当前行及其后的n-1行(n是数字)
x　　　//删除光标所在位置的字符

4) 撤销
u　　　//撤销上一步操作
⑥ 文本查找和替换
在一般模式下，可以执行以下命令。
1) 查找
/pattern　　//从光标开始处向文件尾搜索pattern，后按下n或N

注意：
n			在同一个方向重复上一次搜索命令
N			在反方向重复上一次搜索命令

注意：
在/pattern之前先跳到第一行则进行全文件搜索。

2) 替换
:%s/p1/p2/g　　 //将文件中所有的p1均用p2替换
:%s/p1/p2/gc　　//替换时需要确认
“s“ 全称：substitute替换；
“g“ 全称：global全局；
“c“ 全称：confirm，确认





