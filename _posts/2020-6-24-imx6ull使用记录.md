---
layout: post
comments: true
categories: imx6ull
---

* content
{:toc}


## imx6ull使用记录 <br>

临时生效
$ export ARCH=arm    <br>
$ export CROSS_COMPILE=arm-linux-gnueabihf-   <br>
$ export PATH=$PATH:/home/a/imx6ull/100ask_imx6ull-sdk/ToolChain/gcc-linaro-6.2.1-2016.11-x86_64_arm-linux-gnueabihf/bin  <br>

$ arm-linux-gnueabihf-gcc --version   <br>
$ echo $ARCH <br>
$ echo $CROSS_COMPILE <br>
$ arm-linux-gnueabihf-gcc -v <br>
<br><br><br>

## 编译u-boot镜像 <br>
不同的开发板对应不同的配置文件，配置文件位于 u-boot源码的configs/ 目录 <br>
对于IMX6ULL全功能版，u-boot的编译过程如下(编译uboot前必须先配置好工具链等开发环境)： <br>
book@100ask: ~/100ask_imx6ull-sdk$ cd Uboot-2017.03  <br>
book@100ask: ~/100ask_imx6ull-sdk/Uboot-2017.03$ make distclean  <br>
book@100ask: ~/100ask_imx6ull-sdk/Uboot-2017.03$ make  mx6ull_14x14_evk_defconfig   <br>
book@100ask: ~/100ask_imx6ull-sdk/Uboot-2017.03$ make   <br>

编译完成之后生成u-boot-dtb.imx，可以用于TF卡启动和EMMC启动。为方便学习，建议优先选择从TF卡启动。<br>
<br><br><br>

## 编译Linux Kernel<br>

不同的开发板对应不同的配置文件，配置文件位于内核源码arch/arm/configs/目录。 <br>
kernel的编译过程如下（编译内核前需要先配置好工具链等一些环境变量）：<br>
book@100ask:~/100ask_imx6ull-sdk$ cd Linux-4.9.88 <br>
book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make mrproper <br>
book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make 100ask_imx6ull_defconfig <br>
book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make zImage  -j4 <br>
book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ make dtbs <br>

book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/zImage ~/nfs_rootfs  <br>
book@100ask:~/100ask_imx6ull-sdk/Linux-4.9.88$ cp arch/arm/boot/dts/100ask_imx6ull-14x14.dtb  ~/nfs_rootfs  <br>

把这2个文件复制到/home/book/nfs_rootfs目录下备用<br>

<br><br><br>

## 使用Buildroot构建根文件系统 <br>

提供的Buildroot有如下特性： <br>
web环境	html+php网络开发环境 <br>
Qt环境	Qt 5.9开发环境（选用） <br>
Vim开发环境	vim8.0环境 <br>
串口传输文件	通过z-mode协议使用串口传输文件到开发板 <br>
ssh工具	通过ssh工具登录开发板系统 <br>
nfs工具	通过nfs命令挂载主机文件 <br>
Alsa-utils	Alsa声卡使用工具 <br>
Can-utils	Can接口测试工具 <br>
Wifi工具	用于链接wifi网络/扫描wifi相关工具 <br>
fb-test	用于测试lcd显示色彩是否正常 <br>
Pppd	用于拨号上网工具 <br>


下面以100ask_imx6ull_defconfig配置文件为例，说明 Buildroot 的配置过程： <br>
book@100ask: ~/100ask_imx6ull-sdk $ cd Buildroot_2019.02 <br>
book@100ask:~/100ask_imx6ull-sdk/Buildroot_2019.02$ make clean <br>
book@100ask:~/100ask_imx6ull-sdk/Buildroot_2019.02$ make 100ask_imx6ull_defconfig <br>
book@100ask:~/100ask_imx6ull-sdk/Buildroot_2019.02$ make all <br>
 

编译成功后文件输出路径为 output/images <br>
```c
buildroot2019.02	 
	├── output 
		├── images	
			├── 100ask_imx6ull-14x14.dtb	<--设备树文件	
			├── rootfs.ext2					<--ext2格式根文件系统
			├── rootfs.ext4 -> rootfs.ext2		        <--ext2格式根文件系统	 
			├── rootfs.tar					 
			├── rootfs.tar.bz2				<--打包并压缩的根文件系统，用于NFSROOT启动 
			├── sdcard.img					<--完整的SD卡系统镜像 
			├── u-boot-dtb.imx				<--u-boot镜像
			└── zImage					<--内核镜像
 
```

<br><br><br>


